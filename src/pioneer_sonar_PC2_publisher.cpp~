#include <ros/ros.h>
#include "sensor_msgs/PointCloud2.h"

ros::Publisher pub;

void sonarPC2Callback(const sensor_msgs::PointCloud2& msg)
{
  sensor_msgs::PointCloud2 newcloud = msg ;
  newcloud.header.stamp = ros::Time::now() ;
  newcloud.header.frame_id = "sonar" ;
  
  pub.publish(newcloud) ;
}

int main(int argc, char **argv)
{
  ros::init(argc, argv, "pioneer_sonar_PC2_publisher");

  ros::NodeHandle nHandpub;
  pub = nHandpub.advertise<sensor_msgs::PointCloud2>("/sonarPC2", 10);
  
  ros::NodeHandle nHandsub;  
  ros::Subscriber sub = nHandsub.subscribe("/RosAria/sonar_pointcloud2", 10, &sonarPC2Callback);

  ros::spin();
  return 0;
}
